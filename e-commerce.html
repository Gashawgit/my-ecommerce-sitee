<!-- Complete E‑commerce Demo — Single File
     Save as: complete-ecommerce.html and open in a browser
     Features:
     - Product grid with search, sort and category filter
     - Product quick view modal
     - Shopping cart stored in localStorage
     - Responsive layout (desktop / tablet / mobile)
     - Simple checkout form (mock; no real payment integration)
     - Clean, modern CSS (mobile-first)
-->

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mini E‑Commerce Demo</title>
    <style>
        :root {
            --bg: #f6f8fa;
            --card: #ffffff;
            --primary: #0b6efd;
            --muted: #6b7280;
            --accent: #10b981;
            --shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
            --radius: 12px;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            background: linear-gradient(180deg, var(--bg), #ffffff);
            color: #0f172a
        }

        /* Top nav */
        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 18px;
            background: transparent
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px
        }

        .logo {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--primary), #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700
        }

        .brand h1 {
            margin: 0;
            font-size: 18px
        }

        /* Search & controls */
        .controls {
            display: flex;
            align-items: center;
            gap: 10px
        }

        .search {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--card);
            box-shadow: var(--shadow);
            padding: 6px;
            border-radius: 10px
        }

        .search input {
            border: 0;
            outline: none;
            padding: 8px;
            width: 220px;
            background: transparent
        }

        select,
        button {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid #e6e9ef;
            background: white
        }

        button.primary {
            background: var(--primary);
            color: white;
            border: 0
        }

        /* Layout */
        .wrap {
            display: grid;
            grid-template-columns: 1fr 360px;
            gap: 24px;
            max-width: 1180px;
            margin: 22px auto;
            padding: 0 18px
        }

        /* Products grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 18px
        }

        .card {
            background: var(--card);
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        .thumb {
            height: 160px;
            border-radius: 10px;
            background: #eef2ff;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden
        }

        .thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover
        }

        .meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px
        }

        .title {
            font-weight: 600;
            font-size: 15px
        }

        .price {
            font-weight: 700
        }

        .tags {
            font-size: 12px;
            color: var(--muted)
        }

        .card .actions {
            display: flex;
            gap: 8px;
            margin-top: auto
        }

        /* Cart */
        aside.cart {
            background: linear-gradient(180deg, #fff, #fbfdff);
            padding: 12px;
            border-radius: 12px;
            border: 1px solid #edf2f7;
            height: calc(100vh - 140px);
            position: sticky;
            top: 70px;
            overflow: auto
        }

        .cart h3 {
            margin: 6px 0
        }

        .cart-list {
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        .cart-item {
            display: flex;
            gap: 10px;
            align-items: center
        }

        .cart-item img {
            width: 56px;
            height: 56px;
            border-radius: 8px;
            object-fit: cover
        }

        .qty {
            display: flex;
            align-items: center;
            gap: 6px
        }

        .small {
            font-size: 13px;
            color: var(--muted)
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 12px
        }

        .checkout {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            margin-top: 8px;
            border: 0;
            background: var(--accent);
            color: white;
            font-weight: 700
        }

        /* Modal */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(2, 6, 23, 0.45);
            display: none;
            align-items: center;
            justify-content: center;
            padding: 18px
        }

        .modal {
            background: var(--card);
            padding: 18px;
            border-radius: 14px;
            max-width: 820px;
            width: 100%;
            box-shadow: var(--shadow)
        }

        .modal.show {
            display: block
        }

        /* Responsive */
        @media (max-width:980px) {
            .wrap {
                grid-template-columns: 1fr 320px
            }

            .search input {
                width: 140px
            }
        }

        @media (max-width:780px) {
            .wrap {
                grid-template-columns: 1fr
            }

            aside.cart {
                position: relative;
                height: auto;
                top: 0
            }

            .controls {
                flex-wrap: wrap
            }

            .search input {
                width: 100%
            }
        }

        /* Tiny helpers */
        .muted {
            color: var(--muted)
        }

        .btn {
            border: 0;
            padding: 8px 10px;
            border-radius: 8px
        }

        .pill {
            background: #f1f5f9;
            padding: 6px 8px;
            border-radius: 999px;
            font-size: 12px
        }
    </style>
</head>

<body>
    <header>
        <div class="brand">
            <div class="logo">E</div>
            <div>
                <h1>Edge Shop</h1>
                <div class="small muted">Demo e‑commerce (no real payments)</div>
            </div>
        </div>

        <div class="controls">
            <div class="search">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path d="M21 21l-4.35-4.35" stroke="#6b7280" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                    <circle cx="11" cy="11" r="6" stroke="#6b7280" stroke-width="1.5" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
                <input id="q" placeholder="Search products..." />
            </div>
            <select id="category">
                <option value="all">All categories</option>
            </select>
            <select id="sort">
                <option value="pop">Sort: Popular</option>
                <option value="low">Price: Low → High</option>
                <option value="high">Price: High → Low</option>
            </select>
            <button id="clearCart" title="Clear cart" class="btn">Clear Cart</button>
        </div>
    </header>

    <main class="wrap">
        <section>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <h2 style="margin:0">Featured Products</h2>
                <div class="muted" id="resultsCount"></div>
            </div>

            <div class="grid" id="products"></div>
        </section>

        <aside class="cart">
            <h3>Your Cart</h3>
            <div class="cart-list" id="cartList"></div>
            <div class="total-row">
                <div class="small">Subtotal</div>
                <div id="subtotal">$0.00</div>
            </div>
            <button class="checkout" id="checkoutBtn">Checkout</button>
            <div style="margin-top:10px" class="small muted">This is a demo: checkout will only collect data locally.
            </div>
        </aside>
    </main>

    <!-- Quick view / Checkout modal -->
    <div class="modal-backdrop" id="modal">
        <div class="modal" role="dialog" aria-modal="true">
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Product catalog (sample data)
        const PRODUCTS = [
            { id: 1, title: 'Aerolite Backpack', price: 49.99, cat: 'Bags', img: 'https://via.placeholder.com/600x400?text=Backpack', desc: 'Lightweight waterproof backpack — 20L capacity.' },
            { id: 2, title: 'Canvas Sneakers', price: 69.50, cat: 'Shoes', img: 'https://via.placeholder.com/600x400?text=Sneakers', desc: 'Classic casual sneakers with rubber sole.' },
            { id: 3, title: 'Aurora Headphones', price: 129.00, cat: 'Electronics', img: 'https://via.placeholder.com/600x400?text=Headphones', desc: 'Over-ear Bluetooth with noise isolation.' },
            { id: 4, title: 'Stellar Watch', price: 199.99, cat: 'Accessories', img: 'https://via.placeholder.com/600x400?text=Watch', desc: 'Smartwatch with fitness tracking and long battery.' },
            { id: 5, title: 'Eco Water Bottle', price: 18.00, cat: 'Accessories', img: 'https://via.placeholder.com/600x400?text=Bottle', desc: 'Insulated stainless steel bottle, 500ml.' },
            { id: 6, title: 'Comfy Hoodie', price: 59.99, cat: 'Clothing', img: 'https://via.placeholder.com/600x400?text=Hoodie', desc: 'Soft cotton-blend hoodie, unisex.' },
            { id: 7, title: 'Trail Running Shoes', price: 139.99, cat: 'Shoes', img: 'https://via.placeholder.com/600x400?text=Trail+Shoes', desc: 'Grip sole for trail conditions.' },
            { id: 8, title: 'Portable Charger 20k', price: 39.90, cat: 'Electronics', img: 'https://via.placeholder.com/600x400?text=Power+Bank', desc: '20,000mAh fast charging power bank.' }
        ];

        // App state
        let state = {
            products: PRODUCTS.slice(),
            cart: loadCart()
        };

        // DOM refs
        const productsEl = document.getElementById('products');
        const cartListEl = document.getElementById('cartList');
        const subtotalEl = document.getElementById('subtotal');
        const qEl = document.getElementById('q');
        const categoryEl = document.getElementById('category');
        const sortEl = document.getElementById('sort');
        const resultsCount = document.getElementById('resultsCount');
        const modal = document.getElementById('modal');
        const modalContent = document.getElementById('modalContent');

        // Initialize
        function init() {
            populateCategories();
            renderProducts(state.products);
            renderCart();
            attachListeners();
        }

        function populateCategories() {
            const cats = ['All categories', ...new Set(PRODUCTS.map(p => p.cat))];
            categoryEl.innerHTML = '';
            cats.forEach((c, i) => {
                const opt = document.createElement('option');
                opt.value = i === 0 ? 'all' : c;
                opt.textContent = i === 0 ? 'All categories' : c;
                categoryEl.appendChild(opt);
            })
        }

        function renderProducts(list) {
            productsEl.innerHTML = '';
            resultsCount.textContent = `${list.length} product${list.length !== 1 ? 's' : ''}`;
            list.forEach(p => {
                const card = document.createElement('div'); card.className = 'card';
                card.innerHTML = `
          <div class="thumb"><img src="${p.img}" alt="${escapeHtml(p.title)}"></div>
          <div class="meta"><div class="title">${escapeHtml(p.title)}</div><div class="price">$${p.price.toFixed(2)}</div></div>
          <div class="tags small">${escapeHtml(p.cat)}</div>
          <div class="actions">
            <button class="btn" data-id="${p.id}" data-action="view">Quick view</button>
            <button class="btn primary" data-id="${p.id}" data-action="add">Add to cart</button>
          </div>`;
                productsEl.appendChild(card);
            })
        }

        // Event delegation for product actions
        productsEl.addEventListener('click', e => {
            const btn = e.target.closest('button'); if (!btn) return;
            const id = Number(btn.dataset.id);
            const action = btn.dataset.action;
            if (action === 'add') addToCart(id, 1);
            if (action === 'view') openQuickView(id);
        })

        // Cart rendering
        function renderCart() {
            cartListEl.innerHTML = '';
            const cart = state.cart;
            if (Object.keys(cart).length === 0) { cartListEl.innerHTML = '<div class="small muted">Your cart is empty.</div>'; subtotalEl.textContent = '$0.00'; return }
            let subtotal = 0;
            Object.entries(cart).forEach(([id, qty]) => {
                const p = PRODUCTS.find(x => x.id === Number(id));
                const row = document.createElement('div'); row.className = 'cart-item';
                const lineTotal = p.price * qty; subtotal += lineTotal;

                row.innerHTML = `
          <img src="${p.img}" alt="${escapeHtml(p.title)}">
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:center"><div><strong>${escapeHtml(p.title)}</strong><div class="small muted">$${p.price.toFixed(2)} each</div></div><div class="small">$${lineTotal.toFixed(2)}</div></div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div class="qty">
                <button class="btn" data-id="${p.id}" data-action="dec">−</button>
                <div class="pill">${qty}</div>
                <button class="btn" data-id="${p.id}" data-action="inc">+</button>
              </div>
              <div>
                <button class="btn" data-id="${p.id}" data-action="remove">Remove</button>
              </div>
            </div>
          </div>`;
                cartListEl.appendChild(row);
            })
            subtotalEl.textContent = `$${subtotal.toFixed(2)}`;
        }

        // Cart actions
        cartListEl.addEventListener('click', e => {
            const btn = e.target.closest('button'); if (!btn) return;
            const id = Number(btn.dataset.id); const action = btn.dataset.action;
            if (action === 'inc') addToCart(id, 1);
            if (action === 'dec') addToCart(id, -1);
            if (action === 'remove') removeFromCart(id);
        })

        function addToCart(id, delta = 1) {
            const current = state.cart[id] || 0;
            const next = current + delta;
            if (next <= 0) { delete state.cart[id]; } else { state.cart[id] = next }
            saveCart(); renderCart(); flashCart();
        }

        function removeFromCart(id) { delete state.cart[id]; saveCart(); renderCart(); }

        function saveCart() { localStorage.setItem('eshop_cart', JSON.stringify(state.cart)); }
        function loadCart() { try { return JSON.parse(localStorage.getItem('eshop_cart')) || {} } catch (e) { return {} } }

        // Quick view modal
        function openQuickView(id) {
            const p = PRODUCTS.find(x => x.id === Number(id));
            modalContent.innerHTML = `
        <div style="display:flex;gap:14px;flex-wrap:wrap">
          <div style="flex:1;min-width:240px"><img src="${p.img}" style="width:100%;border-radius:10px" alt="${escapeHtml(p.title)}"></div>
          <div style="flex:1;min-width:260px">
            <h2 style="margin-top:0">${escapeHtml(p.title)}</h2>
            <div style="font-weight:700;font-size:20px">$${p.price.toFixed(2)}</div>
            <div class="small muted" style="margin:8px 0">Category: ${escapeHtml(p.cat)}</div>
            <p>${escapeHtml(p.desc)}</p>
            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="btn primary" id="modalAdd" data-id="${p.id}">Add to cart</button>
              <button class="btn" id="modalClose">Close</button>
            </div>
          </div>
        </div>`;
            modal.style.display = 'flex';

            document.getElementById('modalClose').onclick = () => { modal.style.display = 'none' };
            document.getElementById('modalAdd').onclick = () => { addToCart(p.id, 1); modal.style.display = 'none' };
        }
        modal.addEventListener('click', e => { if (e.target === modal) modal.style.display = 'none' });

        // Search, filter, sort
        function applyFilters() {
            const q = qEl.value.trim().toLowerCase();
            const cat = categoryEl.value;
            const sort = sortEl.value;
            let res = PRODUCTS.filter(p => {
                const matchesQ = q === '' || p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q);
                const matchesCat = cat === 'all' || p.cat === cat;
                return matchesQ && matchesCat;
            })
            if (sort === 'low') res.sort((a, b) => a.price - b.price);
            if (sort === 'high') res.sort((a, b) => b.price - a.price);
            // pop is default (original order)
            renderProducts(res);
        }

        // Simple checkout flow
        document.getElementById('checkoutBtn').addEventListener('click', () => {
            if (Object.keys(state.cart).length === 0) { alert('Your cart is empty'); return }
            modal.style.display = 'flex';
            modalContent.innerHTML = checkoutFormHtml();
            document.getElementById('placeOrder').addEventListener('submit', e => {
                e.preventDefault();
                const fd = new FormData(e.target);
                const order = {
                    name: fd.get('name'), email: fd.get('email'), address: fd.get('address'), items: state.cart, total: subtotalEl.textContent
                };
                // Mock order storage (in real app send to server)
                localStorage.setItem('eshop_last_order', JSON.stringify(order));
                // clear cart
                state.cart = {}; saveCart(); renderCart();
                modalContent.innerHTML = `<div><h3>Thank you!</h3><p class="small muted">Your mock order has been placed. This demo does not process payments.</p><button class="btn" id="closeThanks">Close</button></div>`;
                document.getElementById('closeThanks').onclick = () => { modal.style.display = 'none' }
            })
        })

        function checkoutFormHtml() {
            return `
        <div style="display:flex;gap:12px;flex-direction:column">
          <h3 style="margin-top:0">Checkout</h3>
          <form id="placeOrder">
            <div style="display:flex;gap:10px;flex-wrap:wrap">
              <input name="name" placeholder="Full name" required style="flex:1;padding:10px;border-radius:8px;border:1px solid #e6e9ef">
              <input name="email" type="email" placeholder="Email" required style="flex:1;padding:10px;border-radius:8px;border:1px solid #e6e9ef">
            </div>
            <div style="margin-top:10px">
              <textarea name="address" placeholder="Shipping address" required style="width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ef"></textarea>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
              <div class="small muted">Total: <strong>${subtotalEl.textContent || '$0.00'}</strong></div>
              <button class="btn primary" type="submit">Place order</button>
            </div>
          </form>
        </div>`;
        }

        // Misc controls
        function attachListeners() {
            qEl.addEventListener('input', debounce(applyFilters, 250));
            categoryEl.addEventListener('change', applyFilters);
            sortEl.addEventListener('change', applyFilters);
            document.getElementById('clearCart').addEventListener('click', () => { if (confirm('Clear the cart?')) { state.cart = {}; saveCart(); renderCart(); } });

            // keyboard: Esc to close modal
            document.addEventListener('keydown', e => { if (e.key === 'Escape') modal.style.display = 'none' });
        }

        // Small UI nicety when adding to cart
        function flashCart() {
            const aside = document.querySelector('aside.cart');
            aside.style.transform = 'translateY(-6px)';
            setTimeout(() => aside.style.transform = 'translateY(0)', 160);
        }

        // Helpers
        function escapeHtml(s) { return String(s).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;') }
        function debounce(fn, wait) { let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), wait) } }

        // Start app
        init();

    </script>

</body>

</html>